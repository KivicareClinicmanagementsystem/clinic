"use strict";function getDefaultMenu(){jQuery(".menu-style-one nav.mobile-menu .sub-menu").css("display","none "),jQuery(".menu-style-one nav.mobile-menu .top-menu li .dropdown").hide(),jQuery(".menu-style-one nav.mobile-menu .sub-menu").prev().prev().addClass("submenu"),jQuery(".menu-style-one nav.mobile-menu .sub-menu").before('<span class="toggledrop"><i class="fas fa-chevron-right"></i></span>'),jQuery("nav.mobile-menu .widget i,nav.mobile-menu .top-menu i").on("click",function(){jQuery(this).next(".children, .sub-menu").slideToggle()}),jQuery(".menu-style-one nav.mobile-menu .top-menu .menu-item .toggledrop").off("click"),jQuery(".menu-style-one nav.mobile-menu .menu-item .toggledrop").on("click",function(){0==jQuery(this).closest(".menu-is--open").length&&jQuery(".menu-style-one nav.mobile-menu .menu-item").removeClass("menu-is--open"),1<jQuery(this).parent().find("ul").length&&jQuery(this).parent().addClass("menu-is--open"),jQuery(".menu-style-one nav.mobile-menu .menu-item:not(.menu-is--open) .children,.menu-style-one nav.mobile-menu .menu-item:not(.menu-is--open) .sub-menu").slideUp(),jQuery(this).next(".children, .sub-menu").is(":visible")&&!jQuery(this).parent().hasClass("menu-is--open")||jQuery(this).next(".children, .sub-menu").slideToggle(),jQuery(".menu-style-one nav.mobile-menu .menu-item:not(.menu-is--open) .toggledrop").not(jQuery(this)).removeClass("active"),jQuery(this).toggleClass("active"),jQuery(".menu-style-one nav.mobile-menu .menu-item").removeClass("menu-clicked"),jQuery(this).parent().addClass("menu-clicked"),jQuery(".menu-style-one nav.mobile-menu .menu-item").removeClass("current-menu-ancestor")}),jQuery(document).on("change input","input.qty",function(){set_quanity(jQuery(this))}),jQuery(document).on("added_to_cart",function(e,t,n,o){jQuery("*[title]").tooltip("disable")}),jQuery(document).on("removed_from_cart added_to_cart",function(e){set_quanity(jQuery("input.qty"))})}function DirLoad(){var e=document.getElementsByTagName("html")[0].getAttribute("dir"),n=jQuery(".elementor-section-stretched"),t=document.getElementById("bootstrap-css")?document.getElementById("bootstrap-css"):null,o=t.getAttribute("href"),s=document.getElementsByTagName("html")[0].getAttribute("data-path"),i=document.getElementsByTagName("html")[0].getAttribute("data-version");"rtl"==e&&(i=t.setAttribute("href",s+"vendor/bootstrap.rtl.min.css?ver="+i),t.toString().replace(o,i),n.each(function(e,t){n[e].style.right=jQuery(this).css("left"),n[e].style.left="auto"}),jQuery("body").addClass("rtl"))}function revSlider(){var n;"rtl"==document.getElementsByTagName("html")[0].getAttribute("dir")&&(n=jQuery(".rs-parallax-wrap")).each(function(e){var t=n[e].style.left;n[e].style.right=n[e].style.left,n[e].style.left=t})}function set_quanity(e){e.hasClass("qty")||(e=e.siblings("input.qty"));var t=e.attr("name"),t=!!t&&t.replace(/cart\[([\w]+)\]\[qty\]/g,"$1");t&&(e=e.val(),e=parseFloat(e),jQuery.ajax({type:"POST",url:php_prefix_loadmore_params.ajaxurl,data:{action:"qty_cart",hash:t,quantity:e},success:function(e){jQuery(document.body).trigger("wc_fragment_refresh"),jQuery(".css_prefix-cart-count").html(e.data.quantity),jQuery("#mini-cart-count").html(e.data.quantity),jQuery("#mini-cart-count").each(function(){0==jQuery(this).text().trim()?jQuery("#mini-cart-count").css("display","none"):jQuery("#mini-cart-count").css("display","block")})}}))}!function(r){r(window).on("load",function(e){function t(){var e=r("#main-header").height();r(".iq-height").css("height",e+"px")}new WOW({boxClass:"wow",animateClass:"animated",offset:0,mobile:!0,live:!0}).init(),r("ul.page-numbers").addClass("justify-content-center"),r("#load").fadeOut(),r("#loading").delay(0).fadeOut("slow"),r("#top").on("click",function(){return r("top").tooltip("hide"),window.scrollTo({top:0,behavior:"smooth"}),!1}),0<r(".menu-style-one.css_prefix-mobile-menu").length&&getDefaultMenu(),r(function(){t(),r(window).resize(t)}),0<r("header.default-header").length&&(r(".sub-menu").css("display","none"),r(".sub-menu").prev().addClass("isubmenu"),r(".sub-menu").before('<i class="ion-ios-arrow-down toggledrop" aria-hidden="true"></i>'),r(".widget .ion-ios-arrow-down, #main .ion-ios-arrow-down").on("click",function(){r(this).next(".children, .sub-menu").slideToggle()}),r("#top-menu .menu-item .toggledrop").off("click"),r(".widget .ion-ios-arrow-down, #main .ion-ios-arrow-down").on("click",function(){r(this).next(".children, .sub-menu").slideToggle()}),r("#top-menu .menu-item .toggledrop").off("click"),r(window).width()<1200&&r("#top-menu .menu-item .toggledrop").on("click",function(e){e.preventDefault(),r(this).next(".children, .sub-menu").slideToggle()}))});var n=r(window).scrollTop();r("#back-to-top").fadeOut(),r(window).on("scroll",function(){var e=r(".has-sticky"),t=r(window).scrollTop();r("header.default-header").hasClass("has-sticky")&&(80<=t?e.addClass("menu-sticky animated slideInDown"):e.removeClass("menu-sticky animated slideInDown")),0<r("header.has-sticky").length&&(300<r(this).scrollTop()?(r("header.default-header").addClass("menu-sticky animated slideInDown"),r(".has-sticky .logo").addClass("logo-display")):r(this).scrollTop()<20&&(r("header.default-header").removeClass("menu-sticky animated slideInDown"),r(".has-sticky .logo").removeClass("logo-display"))),10<=n&&r("body").hasClass("side-bar-open")&&r("body").removeClass("side-bar-open"),250<r(this).scrollTop()?r("#back-to-top").fadeIn(1400):r("#back-to-top").fadeOut(400),0<r(".has-sticky").length&&((e=r(window).scrollTop())<n?(r(".has-sticky").addClass("header-up"),r("body").addClass("header--is-sticky"),r(".has-sticky").removeClass("header-down")):(r(".has-sticky").addClass("header-down"),r(".has-sticky").removeClass("header-up "),r("body").removeClass("header--is-sticky")),0==e&&(r(".has-sticky").removeClass("header-up"),r(".has-sticky").removeClass("header-down"),r("body").removeClass("header--is-sticky")),n=e)}),r(document).ready(function(){0<r(".shop-filter-sidebar").length&&r(".shop-filter-sidebar").click(function(){r("body").find(".css_prefix-woo-sidebar").toggleClass("woo-sidebar-open")}),0<r(".btn-search").length&&(r(document).on("click",".btn-search",function(){r(this).parent().find(".css_prefix-search").toggleClass("search--open")}),r(document).on("click",".btn-search-close",function(){r(this).closest(".css_prefix-search").toggleClass("search--open")}),r("body").on("click",function(e){0===r(e.target).closest(".search_form_wrap").length&&r(".css_prefix-search.search--open").removeClass("search--open")})),0<r("#menu-btn-side-open").length&&(r("#menu-btn-side-open").click(function(){r("body").toggleClass("side-bar-open")}),r("#menu-btn-side-close").click(function(){r("body").toggleClass("side-bar-open")}),r("body").mouseup(function(e){0===r(e.target).closest(".iq-menu-side-bar").length&&r("body").removeClass("side-bar-open")}),r(".iq-menu-side-bar").mouseenter(function(){r("body").addClass("body-scroll-hidden")}),r(".iq-menu-side-bar").mouseleave(function(){r("body").removeClass("body-scroll-hidden")})),r("ul.sf-menu").superfish({delay:500,onBeforeShow:function(e){var t,n,o=r(this),s=0,i=0,a=0;1==o.length&&(n=r("#page.site").width(),s=o.parents("li").eq(0).offset().left,i=o.parents("li").eq(0).outerWidth(),a=o.outerWidth(),o.hasClass("iqonic-megamenu-container")&&(o.hasClass("iqonic-full-width")&&r(".iqonic-megamenu-container.iqonic-full-width").css({left:-s}),o.hasClass("iqonic-container-width")&&(t=(0<o.closest(".elementor-container").length?o.closest(".elementor-container"):o.parents("li").eq(0).closest("header .container-fluid nav,header .container nav")).offset(),r(".iqonic-megamenu-container.iqonic-container-width").css({left:-(s-t.left)}))),n-20<s+i+a&&0<s-a?(o.addClass("open-submenu-main"),o.css({left:"auto",right:"0"})):(o.removeClass("open-submenu-main"),o.css({}))),1<o.parents("ul").length&&((n=r("#page.site").width())-20<(s=o.parents("ul").eq(0).offset().left)+(i=o.parents("ul").eq(0).outerWidth())+(a=o.outerWidth())&&0<s-a?(o.addClass("open-submenu-left"),o.css({left:"auto",right:"100%"})):o.removeClass("open-submenu-left"))}}),r(window).on("resize",function(){r(".widget .ion-ios-arrow-down, #main .ion-ios-arrow-down").on("click",function(){r(this).next(".children, .sub-menu").slideToggle()}),r("#top-menu .menu-item .toggledrop").off("click"),r(window).width()<1200&&r("#top-menu .menu-item .toggledrop").on("click",function(e){e.preventDefault(),r(this).next(".children, .sub-menu").slideToggle()})}),0<r(".validate-form").length&&r(".validate-form #commentform").submit(function(){r(".error-msg").hide();var e=r.trim(r(".validate-form #comment").val()),t="";if(0<r(".validate-form #author").length){var n=r.trim(r(".validate-form #email").val()),o=r.trim(r(".validate-form #author").val()),s=r.trim(r(".validate-form #url").val());r(".validate-form #comment,.validate-form #author,.validate-form #email,.validate-form #url").removeClass("iq-warning"),""===e&&(r(".validate-form #comment").addClass("iq-warning"),t="1"),""===n&&(r(".validate-form #author").addClass("iq-warning"),t="1"),""===o&&(r(".validate-form #email").addClass("iq-warning"),t="1"),""===s&&(r(".validate-form #url").addClass("iq-warning"),t="1")}else if(r(".validate-form #comment").removeClass("iq-warning"),""===e&&(r(".validate-form #comment").addClass("iq-warning"),t="1",mfp,close,""!==t&&"1"===t))return r(".error-msg").html("One or more fields have an error. Please check and try again."),r(".error-msg").slideDown(),!1}),r(document).on("click","button.plus, button.minus",function(){r('button[name="update_cart"]').removeAttr("disabled");var e=r(this).closest(".quantity").find(".qty");""==e.val()&&e.val(0);var t=parseFloat(e.val()),n=parseFloat(e.attr("max")),o=parseFloat(e.attr("min")),s=parseFloat(e.attr("step"));r(this).is(".plus")?n&&n<=t?e.val(n):e.val(t+s):o&&t<=o?e.val(o):1<=t&&e.val(t-s)}),0<r("select").length&&(r("select").each(function(){r(this).select2({width:"100%"})}),r(".select2-container").addClass("wide")),r(document.body).on("woosq_loaded woosq_close",function(){r("select").each(function(){r("#woosq-popup select").select2({width:"100%"})}),r(".select2-container").addClass("wide")}),r(window).on("click",function(e){e=r(e.target);e.closest(".search_form_wrap.iq-show").length||r(".search_form_wrap.iq-show").removeClass("iq-show"),e.closest(".header-user-rights.iq-show").length||r(".header-user-rights.iq-show").removeClass("iq-show")}),setTimeout(revSlider,3e3)}),r(document).ready(function(){setTimeout(function(){DirLoad()},500),r(window).resize(revSlider)})}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImN1c3RvbS5qcyJdLCJuYW1lcyI6WyJqUXVlcnkiLCJjc3MiLCJoaWRlIiwicHJldiIsIm9uIiwiYmVmb3JlIiwidGhpcyIsIm5leHQiLCJzbGlkZVRvZ2dsZSIsIm9mZiIsImNsb3Nlc3QiLCJsZW5ndGgiLCJyZW1vdmVDbGFzcyIsInBhcmVudCIsImZpbmQiLCJhZGRDbGFzcyIsInNsaWRlVXAiLCJpcyIsIm5vdCIsInRvZ2dsZUNsYXNzIiwic2V0X3F1YW5pdHkiLCJkb2N1bWVudCIsImEiLCJiIiwiYyIsImQiLCJ0b29sdGlwIiwiZSIsIkRpck1vZGUiLCJSVExnZXRDc3MiLCJ0b1N0cmluZyIsInJlcGxhY2UiLCJnZXRBdHRyaWJ1dGUiLCJMYW5nRWxlbWVudHMiLCJpbmRleCIsInN0eWxlIiwiZ2V0RWxlbWVudEJ5SWQiLCJwYXRoIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJ2ZXJzaW9uIiwicmV2U2xpZGVyIiwicl91cmwiLCJyYl91cmwiLCJlYWNoIiwia2V5IiwicmlnaHQiLCJsZWZ0IiwiaGFzQ2xhc3MiLCJ0aGlzXyIsInNpYmxpbmdzIiwiYWpheCIsInR5cGUiLCJ1cmwiLCJwaHBfcHJlZml4X2xvYWRtb3JlX3BhcmFtcyIsImFjdGlvbiIsImF0dHIiLCJxdWFudGl0eSIsImN1cnJlbnRWYWwiLCJpdGVtX2hhc2giLCJ2YWwiLCJwYXJzZUZsb2F0IiwiaXRlbV9xdWFudGl0eSIsImFqYXh1cmwiLCJoYXNoIiwic3VjY2VzcyIsInJlcyIsImJvZHkiLCJ0cmlnZ2VyIiwiaHRtbCIsInRleHQiLCJ0cmltIiwid2luZG93IiwiaGVpZ2h0IiwiV09XIiwiYm94Q2xhc3MiLCJhbmltYXRlQ2xhc3MiLCJvZmZzZXQiLCJtb2JpbGUiLCJsaXZlIiwid293IiwiZmFkZU91dCIsImRlbGF5IiwidG9wIiwiYmVoYXZpb3IiLCJzY3JvbGxUbyIsImdldERlZmF1bHRNZW51IiwiaGVhZGVySGVpZ2h0IiwicmVzaXplIiwicHJldmVudERlZmF1bHQiLCJ3aWR0aCIsInBvc2l0aW9uIiwic2Nyb2xsVG9wIiwiaGVhZGVyIiwieU9mZnNldCIsImZhZGVJbiIsInNjcm9sbCIsInJlYWR5IiwidGFyZ2V0IiwiY2xpY2siLCJtb3VzZWxlYXZlIiwibW91c2V1cCIsIm1vdXNlZW50ZXIiLCJzdXBlcmZpc2giLCJvbkJlZm9yZVNob3ciLCJ1bCIsImVsZW1fb2Zmc2V0IiwicGFyZW50cyIsInVsX3dpZHRoIiwiZWxlbSIsImVsZW1fd2lkdGgiLCJwYWdlX3dpZHRoIiwiZXEiLCJvdXRlcldpZHRoIiwiY29udGFpbmVyT2Zmc2V0Iiwic3VibWl0IiwiY21udCIsImVtYWlsIiwiZXJyb3IiLCJhdXRob3IiLCJtZnAiLCJjbG9zZSIsInNsaWRlRG93biIsInF0eSIsInJlbW92ZUF0dHIiLCJtYXgiLCJtaW4iLCJzdGVwIiwic2VsZWN0MiIsInNldFRpbWVvdXQiXSwibWFwcGluZ3MiOiJhQWthRUEsU0FBQUEsaUJBQ0FBLE9BRkQsNkNBQUFDLElBQUEsVUFBQSxTQUdBRCxPQUFNLDBEQUFDRSxPQUNQRixPQUFNLDZDQUFDRyxPQUFBQSxPQUEwREMsU0FBRyxXQUNuRUosT0FBSUEsNkNBQUFLLE9BQW9ELHdFQUV2REwsT0FBQSx5REFBQUksR0FBQSxRQUFBLFdBTkRKLE9BQU9NLE1BQU1DLEtBQUssd0JBQXdCQyxnQkFRekNSLE9BQUFBLG9FQUFBUyxJQUFBLFNBQ0FULE9BQUEsMERBQUFJLEdBQUEsUUFBQSxXQUxvRCxHQUFqREosT0FBT00sTUFBTUksUUFBUSxrQkFBa0JDLFFBTTNDWCxPQUFNLDhDQUFDWSxZQUFBLGlCQUNnQixFQUF2QlosT0FBS0EsTUFBT2EsU0FBV0MsS0FBQSxNQUFBSCxRQUN0QlgsT0FBQUEsTUFBT2EsU0FBV0UsU0FBQSxpQkFGbkJmLE9BQU8scUpBQXFKZ0IsVUFJNUpoQixPQUFPTSxNQUFBQyxLQUFBLHdCQUFBVSxHQUFBLGNBQUFqQixPQUFBTSxNQUFBTyxTQUE4RUssU0FBSWxCLGtCQUV6RkEsT0FBTU0sTUFBTkMsS0FBYVksd0JBQWJY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RSxHQUFBa0UsRUE5QkhILEVBQUEvRCxJQUFBa0UsR0FrQ0EsR0FBQWxFLEdBRUYrRCxFQUFBL0QsSUFBQUEsRUFBQW1FLEtBT1UsRUFBUDlILEVBQU8sVUFBQVcsU0FDUFgsRUFBQSxVQUFBMkMsS0FBQSxXQUVEM0MsRUFBQU0sTUFBQXlILFFBQUEsQ0FDRnRDLE1BQUEsV0FKR3pGLEVBQU8sc0JBQXNCZSxTQUFTLFNBV3JDZixFQUpEcUIsU0FBQTZDLE1BQUE5RCxHQUFBLDJCQUFBLFdBS0FKLEVBQUFBLFVBQU8yQyxLQUFBLFdBQ1AzQyxFQVBELHVCQUFBK0gsUUFBQSxDQVNBL0gsTUFBT3VFLFdBRU52RSxFQUFJLHNCQUFnQmUsU0FBQSxVQUZyQmYsRUFBT3VFLFFBQVFuRSxHQUFHLFFBQVMsU0FBVXVCLEdBTXBDc0UsRUFBS0EsRUFBT3ZGLEVBQVB1RixRQUNKakcsRUFBT1UsUUFBQSw2QkFBK0JFLFFBQ3RDWixFQUFBLDZCQUFBWSxZQUFBLFdBdlBIcUYsRUFBQXZGLFFBQUEsK0JBQUFDLFFBNFBBWCxFQUFPcUIsK0JBQTRCVCxZQUFBLGFBRzNCb0gsV0FGRHhGLFVBQUEsT0E1WVB4QyxFQWlaQ0EsVUFqWkZnRyxNQUFBLFdBNFlRZ0MsV0FBVyxXQU9WM0MsV0FDRCxLQUNQckYsRUFBT3VFLFFBQUFnQixPQUFBL0MsYUF2WlIsQ0F5WkN4QyIsImZpbGUiOiJjdXN0b20ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBGaWxlIGN1c3RvbWl6ZXIuanMuXG4gKlxuICogVGhlbWUgQ3VzdG9taXplciBlbmhhbmNlbWVudHMgZm9yIGEgYmV0dGVyIHVzZXIgZXhwZXJpZW5jZS5cbiAqXG4gKiBDb250YWlucyBoYW5kbGVycyB0byBtYWtlIFRoZW1lIEN1c3RvbWl6ZXIgcHJldmlldyByZWxvYWQgY2hhbmdlcyBhc3luY2hyb25vdXNseS5cbiAqL1xuXG4oZnVuY3Rpb24gKGpRdWVyeSkge1xuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRqUXVlcnkod2luZG93KS5vbignbG9hZCcsIGZ1bmN0aW9uIChlKSB7XG5cblx0XHQvKi0tIFdvdyBBbmltYXRpb24gLS0qL1xuXHRcdHZhciB3b3cgPSBuZXcgV09XKHtcblx0XHRcdGJveENsYXNzOiAnd293Jyxcblx0XHRcdGFuaW1hdGVDbGFzczogJ2FuaW1hdGVkJyxcblx0XHRcdG9mZnNldDogMCxcblx0XHRcdG1vYmlsZTogdHJ1ZSxcblx0XHRcdGxpdmU6IHRydWVcblx0XHR9KTtcblx0XHR3b3cuaW5pdCgpO1xuXG5cdFx0alF1ZXJ5KCd1bC5wYWdlLW51bWJlcnMnKS5hZGRDbGFzcygnanVzdGlmeS1jb250ZW50LWNlbnRlcicpO1xuXG5cdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHRQYWdlIExvYWRlclxuXHRcdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdGpRdWVyeShcIiNsb2FkXCIpLmZhZGVPdXQoKTtcblx0XHRqUXVlcnkoXCIjbG9hZGluZ1wiKS5kZWxheSgwKS5mYWRlT3V0KFwic2xvd1wiKTtcblxuXHRcdC8vIHNjcm9sbCBib2R5IHRvIDBweCBvbiBjbGljayBiYWNrIHRvIHRvcFxuXHRcdGpRdWVyeSgnI3RvcCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcblx0XHRcdGpRdWVyeSgndG9wJykudG9vbHRpcCgnaGlkZScpO1xuXHRcdFx0d2luZG93LnNjcm9sbFRvKHtcblx0XHRcdFx0dG9wOiAwLFxuXHRcdFx0XHRiZWhhdmlvcjogJ3Ntb290aCdcblx0XHRcdH0pO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH0pO1xuXG5cdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIFZlcnRpY2FsIE1lbnVcblx0XHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cdFx0aWYgKGpRdWVyeSgnLm1lbnUtc3R5bGUtb25lLmNzc19wcmVmaXgtbW9iaWxlLW1lbnUnKS5sZW5ndGggPiAwKSB7XG5cdFx0XHRnZXREZWZhdWx0TWVudSgpO1xuXHRcdH1cblxuXHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0XHRIZWFkZXIgc3R5bGUgb25lXG5cdCAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cdFx0ZnVuY3Rpb24gaGVhZGVySGVpZ2h0KCkge1xuXHRcdFx0Y29uc3QgaGVpZ2h0ID0galF1ZXJ5KCcjbWFpbi1oZWFkZXInKS5oZWlnaHQoKTtcblx0XHRcdGpRdWVyeSgnLmlxLWhlaWdodCcpLmNzcygnaGVpZ2h0JywgaGVpZ2h0ICsgJ3B4Jyk7XG5cdFx0fVxuXG5cdFx0alF1ZXJ5KGZ1bmN0aW9uICgpIHtcblx0XHRcdGhlYWRlckhlaWdodCgpO1xuXHRcdFx0alF1ZXJ5KHdpbmRvdykucmVzaXplKGhlYWRlckhlaWdodCk7XG5cblx0XHR9KTtcblxuXHRcdGlmIChqUXVlcnkoJ2hlYWRlci5kZWZhdWx0LWhlYWRlcicpLmxlbmd0aCA+IDApIHtcblx0XHRcdGpRdWVyeSgnLnN1Yi1tZW51JykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcblx0XHRcdGpRdWVyeSgnLnN1Yi1tZW51JykucHJldigpLmFkZENsYXNzKCdpc3VibWVudScpO1xuXHRcdFx0alF1ZXJ5KFwiLnN1Yi1tZW51XCIpLmJlZm9yZSgnPGkgY2xhc3M9XCJpb24taW9zLWFycm93LWRvd24gdG9nZ2xlZHJvcFwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT4nKTtcblxuXHRcdFx0alF1ZXJ5KCcud2lkZ2V0IC5pb24taW9zLWFycm93LWRvd24sICNtYWluIC5pb24taW9zLWFycm93LWRvd24nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdGpRdWVyeSh0aGlzKS5uZXh0KCcuY2hpbGRyZW4sIC5zdWItbWVudScpLnNsaWRlVG9nZ2xlKCk7XG5cdFx0XHR9KTtcblxuXHRcdFx0alF1ZXJ5KFwiI3RvcC1tZW51IC5tZW51LWl0ZW0gLnRvZ2dsZWRyb3BcIikub2ZmKFwiY2xpY2tcIik7XG5cblx0XHRcdGpRdWVyeSgnLndpZGdldCAuaW9uLWlvcy1hcnJvdy1kb3duLCAjbWFpbiAuaW9uLWlvcy1hcnJvdy1kb3duJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRqUXVlcnkodGhpcykubmV4dCgnLmNoaWxkcmVuLCAuc3ViLW1lbnUnKS5zbGlkZVRvZ2dsZSgpO1xuXHRcdFx0fSk7XG5cdFx0XHRqUXVlcnkoXCIjdG9wLW1lbnUgLm1lbnUtaXRlbSAudG9nZ2xlZHJvcFwiKS5vZmYoXCJjbGlja1wiKTtcblx0XHRcdGlmIChqUXVlcnkod2luZG93KS53aWR0aCgpIDwgMTIwMCkge1xuXHRcdFx0XHRqUXVlcnkoJyN0b3AtbWVudSAubWVudS1pdGVtIC50b2dnbGVkcm9wJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcblx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0alF1ZXJ5KHRoaXMpLm5leHQoJy5jaGlsZHJlbiwgLnN1Yi1tZW51Jykuc2xpZGVUb2dnbGUoKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdH0pO1xuXG5cdHZhciBwb3NpdGlvbiA9IGpRdWVyeSh3aW5kb3cpLnNjcm9sbFRvcCgpO1xuXHRqUXVlcnkoJyNiYWNrLXRvLXRvcCcpLmZhZGVPdXQoKTtcblxuXHRqUXVlcnkod2luZG93KS5vbignc2Nyb2xsJywgZnVuY3Rpb24gKCkge1xuXG5cdFx0dmFyIGhlYWRlciA9IGpRdWVyeShcIi5oYXMtc3RpY2t5XCIpLFxuXHRcdFx0eU9mZnNldCA9IDAsXG5cdFx0XHR0cmlnZ2VyUG9pbnQgPSA4MDtcblx0XHR5T2Zmc2V0ID0galF1ZXJ5KHdpbmRvdykuc2Nyb2xsVG9wKCk7XG5cblx0XHRpZiAoalF1ZXJ5KCdoZWFkZXIuZGVmYXVsdC1oZWFkZXInKS5oYXNDbGFzcygnaGFzLXN0aWNreScpKSB7XG5cdFx0XHRpZiAoeU9mZnNldCA+PSB0cmlnZ2VyUG9pbnQpIHtcblx0XHRcdFx0aGVhZGVyLmFkZENsYXNzKFwibWVudS1zdGlja3kgYW5pbWF0ZWQgc2xpZGVJbkRvd25cIik7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRoZWFkZXIucmVtb3ZlQ2xhc3MoXCJtZW51LXN0aWNreSBhbmltYXRlZCBzbGlkZUluRG93blwiKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYgKGpRdWVyeSgnaGVhZGVyLmhhcy1zdGlja3knKS5sZW5ndGggPiAwKSB7XG5cblx0XHRcdGlmIChqUXVlcnkodGhpcykuc2Nyb2xsVG9wKCkgPiAzMDApIHtcblx0XHRcdFx0alF1ZXJ5KCdoZWFkZXIuZGVmYXVsdC1oZWFkZXInKS5hZGRDbGFzcygnbWVudS1zdGlja3kgYW5pbWF0ZWQgc2xpZGVJbkRvd24nKTtcblx0XHRcdFx0alF1ZXJ5KCcuaGFzLXN0aWNreSAubG9nbycpLmFkZENsYXNzKCdsb2dvLWRpc3BsYXknKTtcblx0XHRcdH0gZWxzZSBpZiAoalF1ZXJ5KHRoaXMpLnNjcm9sbFRvcCgpIDwgMjApIHtcblx0XHRcdFx0alF1ZXJ5KCdoZWFkZXIuZGVmYXVsdC1oZWFkZXInKS5yZW1vdmVDbGFzcygnbWVudS1zdGlja3kgYW5pbWF0ZWQgc2xpZGVJbkRvd24nKTtcblx0XHRcdFx0alF1ZXJ5KCcuaGFzLXN0aWNreSAubG9nbycpLnJlbW92ZUNsYXNzKCdsb2dvLWRpc3BsYXknKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYgKHBvc2l0aW9uID49IDEwICYmIGpRdWVyeShcImJvZHlcIikuaGFzQ2xhc3MoXCJzaWRlLWJhci1vcGVuXCIpKSB7XG5cdFx0XHRqUXVlcnkoXCJib2R5XCIpLnJlbW92ZUNsYXNzKFwic2lkZS1iYXItb3BlblwiKTtcblx0XHR9XG5cblx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdEJhY2sgVG8gVG9wXG5cdFx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0aWYgKGpRdWVyeSh0aGlzKS5zY3JvbGxUb3AoKSA+IDI1MCkge1xuXHRcdFx0alF1ZXJ5KCcjYmFjay10by10b3AnKS5mYWRlSW4oMTQwMCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGpRdWVyeSgnI2JhY2stdG8tdG9wJykuZmFkZU91dCg0MDApO1xuXHRcdH1cblxuXHRcdGlmIChqUXVlcnkoJy5oYXMtc3RpY2t5JykubGVuZ3RoID4gMCkge1xuXHRcdFx0dmFyIHNjcm9sbCA9IGpRdWVyeSh3aW5kb3cpLnNjcm9sbFRvcCgpO1xuXHRcdFx0aWYgKHNjcm9sbCA8IHBvc2l0aW9uKSB7XG5cdFx0XHRcdGpRdWVyeSgnLmhhcy1zdGlja3knKS5hZGRDbGFzcygnaGVhZGVyLXVwJyk7XG5cdFx0XHRcdGpRdWVyeSgnYm9keScpLmFkZENsYXNzKCdoZWFkZXItLWlzLXN0aWNreScpO1xuXHRcdFx0XHRqUXVlcnkoJy5oYXMtc3RpY2t5JykucmVtb3ZlQ2xhc3MoJ2hlYWRlci1kb3duJyk7XG5cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGpRdWVyeSgnLmhhcy1zdGlja3knKS5hZGRDbGFzcygnaGVhZGVyLWRvd24nKTtcblx0XHRcdFx0alF1ZXJ5KCcuaGFzLXN0aWNreScpLnJlbW92ZUNsYXNzKCdoZWFkZXItdXAgJyk7XG5cdFx0XHRcdGpRdWVyeSgnYm9keScpLnJlbW92ZUNsYXNzKCdoZWFkZXItLWlzLXN0aWNreScpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHNjcm9sbCA9PSAwKSB7XG5cdFx0XHRcdGpRdWVyeSgnLmhhcy1zdGlja3knKS5yZW1vdmVDbGFzcygnaGVhZGVyLXVwJyk7XG5cdFx0XHRcdGpRdWVyeSgnLmhhcy1zdGlja3knKS5yZW1vdmVDbGFzcygnaGVhZGVyLWRvd24nKTtcblx0XHRcdFx0alF1ZXJ5KCdib2R5JykucmVtb3ZlQ2xhc3MoJ2hlYWRlci0taXMtc3RpY2t5Jyk7XG5cdFx0XHR9XG5cdFx0XHRwb3NpdGlvbiA9IHNjcm9sbDtcblx0XHR9XG5cblx0fSk7XG5cblx0alF1ZXJ5KGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG5cblx0XHQvLyBzaG9wIHNpZGViYXIgdG9nZ2xlIGJ1dHRvblxuXHRcdGlmIChqUXVlcnkoJy5zaG9wLWZpbHRlci1zaWRlYmFyJykubGVuZ3RoID4gMCkge1xuXHRcdFx0alF1ZXJ5KCcuc2hvcC1maWx0ZXItc2lkZWJhcicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0alF1ZXJ5KCdib2R5JykuZmluZCgnLmNzc19wcmVmaXgtd29vLXNpZGViYXInKS50b2dnbGVDbGFzcygnd29vLXNpZGViYXItb3BlbicpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAgIFNlYXJjaCBCYXIgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0aWYgKGpRdWVyeShcIi5idG4tc2VhcmNoXCIpLmxlbmd0aCA+IDApIHtcblx0XHRcdGpRdWVyeShkb2N1bWVudCkub24oJ2NsaWNrJywgJy5idG4tc2VhcmNoJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRqUXVlcnkodGhpcykucGFyZW50KCkuZmluZCgnLmNzc19wcmVmaXgtc2VhcmNoJykudG9nZ2xlQ2xhc3MoJ3NlYXJjaC0tb3BlbicpO1xuXHRcdFx0fSk7XG5cdFx0XHRqUXVlcnkoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuYnRuLXNlYXJjaC1jbG9zZScsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0alF1ZXJ5KHRoaXMpLmNsb3Nlc3QoJy5jc3NfcHJlZml4LXNlYXJjaCcpLnRvZ2dsZUNsYXNzKCdzZWFyY2gtLW9wZW4nKTtcblx0XHRcdH0pO1xuXHRcdFx0alF1ZXJ5KCdib2R5Jykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcblx0XHRcdFx0aWYgKGpRdWVyeShlLnRhcmdldCkuY2xvc2VzdChcIi5zZWFyY2hfZm9ybV93cmFwXCIpLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHRcdGpRdWVyeShcIi5jc3NfcHJlZml4LXNlYXJjaC5zZWFyY2gtLW9wZW5cIikucmVtb3ZlQ2xhc3MoXCJzZWFyY2gtLW9wZW5cIik7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcblx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdFNpZGViYXJcblx0XHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0aWYgKGpRdWVyeSgnI21lbnUtYnRuLXNpZGUtb3BlbicpLmxlbmd0aCA+IDApIHtcblx0XHRcdGpRdWVyeShcIiNtZW51LWJ0bi1zaWRlLW9wZW5cIikuY2xpY2soZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRqUXVlcnkoXCJib2R5XCIpLnRvZ2dsZUNsYXNzKFwic2lkZS1iYXItb3BlblwiKTtcblxuXHRcdFx0fSk7XG5cdFx0XHRqUXVlcnkoXCIjbWVudS1idG4tc2lkZS1jbG9zZVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdGpRdWVyeShcImJvZHlcIikudG9nZ2xlQ2xhc3MoXCJzaWRlLWJhci1vcGVuXCIpO1xuXHRcdFx0fSk7XG5cdFx0XHRqUXVlcnkoJ2JvZHknKS5tb3VzZXVwKGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRcdGlmIChqUXVlcnkoZS50YXJnZXQpLmNsb3Nlc3QoXCIuaXEtbWVudS1zaWRlLWJhclwiKS5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0XHRqUXVlcnkoXCJib2R5XCIpLnJlbW92ZUNsYXNzKFwic2lkZS1iYXItb3BlblwiKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRqUXVlcnkoXCIuaXEtbWVudS1zaWRlLWJhclwiKS5tb3VzZWVudGVyKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0alF1ZXJ5KFwiYm9keVwiKS5hZGRDbGFzcyhcImJvZHktc2Nyb2xsLWhpZGRlblwiKTtcblx0XHRcdH0pO1xuXHRcdFx0alF1ZXJ5KFwiLmlxLW1lbnUtc2lkZS1iYXJcIikubW91c2VsZWF2ZShmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdGpRdWVyeShcImJvZHlcIikucmVtb3ZlQ2xhc3MoXCJib2R5LXNjcm9sbC1oaWRkZW5cIik7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdCAgICAgICAgc3VwZXJmaXNoIG1lbnVcblx0XHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cdFx0alF1ZXJ5KCd1bC5zZi1tZW51Jykuc3VwZXJmaXNoKHtcblx0XHRcdGRlbGF5OiA1MDAsXG5cdFx0XHRvbkJlZm9yZVNob3c6IGZ1bmN0aW9uICh1bCkge1xuXHRcdFx0XHR2YXIgZWxlbSA9IGpRdWVyeSh0aGlzKTtcblx0XHRcdFx0dmFyIGVsZW1fb2Zmc2V0ID0gMCxcblx0XHRcdFx0XHRlbGVtX3dpZHRoID0gMCxcblx0XHRcdFx0XHR1bF93aWR0aCA9IDA7XG5cdFx0XHRcdC8vIEFkZCBjbGFzcyBpZiBtZW51IGF0IHRoZSBlZGdlIG9mIHRoZSB3aW5kb3dcblx0XHRcdFx0aWYgKGVsZW0ubGVuZ3RoID09IDEpIHtcblx0XHRcdFx0XHR2YXIgcGFnZV93aWR0aCA9IGpRdWVyeSgnI3BhZ2Uuc2l0ZScpLndpZHRoKCksXG5cdFx0XHRcdFx0XHRlbGVtX29mZnNldCA9IGVsZW0ucGFyZW50cygnbGknKS5lcSgwKS5vZmZzZXQoKS5sZWZ0LFxuXHRcdFx0XHRcdFx0ZWxlbV93aWR0aCA9IGVsZW0ucGFyZW50cygnbGknKS5lcSgwKS5vdXRlcldpZHRoKCksXG5cdFx0XHRcdFx0XHR1bF93aWR0aCA9IGVsZW0ub3V0ZXJXaWR0aCgpO1xuXG5cdFx0XHRcdFx0aWYgKGVsZW0uaGFzQ2xhc3MoJ2lxb25pYy1tZWdhbWVudS1jb250YWluZXInKSkge1xuXHRcdFx0XHRcdFx0aWYgKGVsZW0uaGFzQ2xhc3MoJ2lxb25pYy1mdWxsLXdpZHRoJykpIHtcblx0XHRcdFx0XHRcdFx0alF1ZXJ5KCcuaXFvbmljLW1lZ2FtZW51LWNvbnRhaW5lci5pcW9uaWMtZnVsbC13aWR0aCcpLmNzcyh7XG5cdFx0XHRcdFx0XHRcdFx0J2xlZnQnOiAtZWxlbV9vZmZzZXQsXG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYgKGVsZW0uaGFzQ2xhc3MoJ2lxb25pYy1jb250YWluZXItd2lkdGgnKSkge1xuXHRcdFx0XHRcdFx0XHRsZXQgY29udGFpbmVyT2Zmc2V0ID0gKGVsZW0uY2xvc2VzdCgnLmVsZW1lbnRvci1jb250YWluZXInKS5sZW5ndGggPiAwKSA/IGVsZW0uY2xvc2VzdCgnLmVsZW1lbnRvci1jb250YWluZXInKS5vZmZzZXQoKSA6IGVsZW0ucGFyZW50cygnbGknKS5lcSgwKS5jbG9zZXN0KCdoZWFkZXIgLmNvbnRhaW5lci1mbHVpZCBuYXYsaGVhZGVyIC5jb250YWluZXIgbmF2Jykub2Zmc2V0KCk7XG5cdFx0XHRcdFx0XHRcdGpRdWVyeSgnLmlxb25pYy1tZWdhbWVudS1jb250YWluZXIuaXFvbmljLWNvbnRhaW5lci13aWR0aCcpLmNzcyh7XG5cdFx0XHRcdFx0XHRcdFx0J2xlZnQnOiAtKGVsZW1fb2Zmc2V0IC0gY29udGFpbmVyT2Zmc2V0LmxlZnQpXG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoZWxlbV9vZmZzZXQgKyBlbGVtX3dpZHRoICsgdWxfd2lkdGggPiBwYWdlX3dpZHRoIC0gMjAgJiYgZWxlbV9vZmZzZXQgLSB1bF93aWR0aCA+IDApIHtcblx0XHRcdFx0XHRcdGVsZW0uYWRkQ2xhc3MoJ29wZW4tc3VibWVudS1tYWluJyk7XG5cdFx0XHRcdFx0XHRlbGVtLmNzcyh7XG5cdFx0XHRcdFx0XHRcdCdsZWZ0JzogJ2F1dG8nLFxuXHRcdFx0XHRcdFx0XHQncmlnaHQnOiAnMCdcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRlbGVtLnJlbW92ZUNsYXNzKCdvcGVuLXN1Ym1lbnUtbWFpbicpO1xuXHRcdFx0XHRcdFx0ZWxlbS5jc3Moe30pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoZWxlbS5wYXJlbnRzKFwidWxcIikubGVuZ3RoID4gMSkge1xuXHRcdFx0XHRcdHZhciBwYWdlX3dpZHRoID0galF1ZXJ5KCcjcGFnZS5zaXRlJykud2lkdGgoKTtcblx0XHRcdFx0XHRlbGVtX29mZnNldCA9IGVsZW0ucGFyZW50cyhcInVsXCIpLmVxKDApLm9mZnNldCgpLmxlZnQ7XG5cdFx0XHRcdFx0ZWxlbV93aWR0aCA9IGVsZW0ucGFyZW50cyhcInVsXCIpLmVxKDApLm91dGVyV2lkdGgoKTtcblx0XHRcdFx0XHR1bF93aWR0aCA9IGVsZW0ub3V0ZXJXaWR0aCgpO1xuXG5cdFx0XHRcdFx0aWYgKGVsZW1fb2Zmc2V0ICsgZWxlbV93aWR0aCArIHVsX3dpZHRoID4gcGFnZV93aWR0aCAtIDIwICYmIGVsZW1fb2Zmc2V0IC0gdWxfd2lkdGggPiAwKSB7XG5cdFx0XHRcdFx0XHRlbGVtLmFkZENsYXNzKCdvcGVuLXN1Ym1lbnUtbGVmdCcpO1xuXHRcdFx0XHRcdFx0ZWxlbS5jc3Moe1xuXHRcdFx0XHRcdFx0XHQnbGVmdCc6ICdhdXRvJyxcblx0XHRcdFx0XHRcdFx0J3JpZ2h0JzogJzEwMCUnXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0ZWxlbS5yZW1vdmVDbGFzcygnb3Blbi1zdWJtZW51LWxlZnQnKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0fSk7XG5cblx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgICAgV293IEFuaW1hdGlvblxuICAgICAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cdFx0alF1ZXJ5KHdpbmRvdykub24oJ3Jlc2l6ZScsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFwidXNlIHN0cmljdFwiO1xuXHRcdFx0alF1ZXJ5KCcud2lkZ2V0IC5pb24taW9zLWFycm93LWRvd24sICNtYWluIC5pb24taW9zLWFycm93LWRvd24nKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdGpRdWVyeSh0aGlzKS5uZXh0KCcuY2hpbGRyZW4sIC5zdWItbWVudScpLnNsaWRlVG9nZ2xlKCk7XG5cdFx0XHR9KTtcblx0XHRcdGpRdWVyeShcIiN0b3AtbWVudSAubWVudS1pdGVtIC50b2dnbGVkcm9wXCIpLm9mZihcImNsaWNrXCIpO1xuXHRcdFx0aWYgKGpRdWVyeSh3aW5kb3cpLndpZHRoKCkgPCAxMjAwKSB7XG5cdFx0XHRcdGpRdWVyeSgnI3RvcC1tZW51IC5tZW51LWl0ZW0gLnRvZ2dsZWRyb3AnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRqUXVlcnkodGhpcykubmV4dCgnLmNoaWxkcmVuLCAuc3ViLW1lbnUnKS5zbGlkZVRvZ2dsZSgpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0ICAgIENvbW1lbnQgRm9ybSB2YWxpZGF0aW9uXG5cdFx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXHRcdGlmIChqUXVlcnkoJy52YWxpZGF0ZS1mb3JtJykubGVuZ3RoID4gMCkge1xuXHRcdFx0alF1ZXJ5KCcudmFsaWRhdGUtZm9ybSAjY29tbWVudGZvcm0nKS5zdWJtaXQoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRqUXVlcnkoJy5lcnJvci1tc2cnKS5oaWRlKCk7XG5cdFx0XHRcdHZhciBjbW50ID0galF1ZXJ5LnRyaW0oalF1ZXJ5KFwiLnZhbGlkYXRlLWZvcm0gI2NvbW1lbnRcIikudmFsKCkpO1xuXHRcdFx0XHR2YXIgZXJyb3IgPSAnJztcblx0XHRcdFx0aWYgKGpRdWVyeShcIi52YWxpZGF0ZS1mb3JtICNhdXRob3JcIikubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdHZhciBhdXRob3IgPSBqUXVlcnkudHJpbShqUXVlcnkoXCIudmFsaWRhdGUtZm9ybSAjZW1haWxcIikudmFsKCkpO1xuXHRcdFx0XHRcdHZhciBlbWFpbCA9IGpRdWVyeS50cmltKGpRdWVyeShcIi52YWxpZGF0ZS1mb3JtICNhdXRob3JcIikudmFsKCkpO1xuXHRcdFx0XHRcdHZhciB1cmwgPSBqUXVlcnkudHJpbShqUXVlcnkoXCIudmFsaWRhdGUtZm9ybSAjdXJsXCIpLnZhbCgpKTtcblx0XHRcdFx0XHRqUXVlcnkoXCIudmFsaWRhdGUtZm9ybSAjY29tbWVudCwudmFsaWRhdGUtZm9ybSAjYXV0aG9yLC52YWxpZGF0ZS1mb3JtICNlbWFpbCwudmFsaWRhdGUtZm9ybSAjdXJsXCIpLnJlbW92ZUNsYXNzKCdpcS13YXJuaW5nJyk7XG5cblx0XHRcdFx0XHRpZiAoY21udCA9PT0gXCJcIikge1xuXHRcdFx0XHRcdFx0alF1ZXJ5KFwiLnZhbGlkYXRlLWZvcm0gI2NvbW1lbnRcIikuYWRkQ2xhc3MoJ2lxLXdhcm5pbmcnKTtcblx0XHRcdFx0XHRcdGVycm9yID0gJzEnO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoYXV0aG9yID09PSBcIlwiKSB7XG5cdFx0XHRcdFx0XHRqUXVlcnkoXCIudmFsaWRhdGUtZm9ybSAjYXV0aG9yXCIpLmFkZENsYXNzKCdpcS13YXJuaW5nJyk7XG5cdFx0XHRcdFx0XHRlcnJvciA9ICcxJztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKGVtYWlsID09PSBcIlwiKSB7XG5cdFx0XHRcdFx0XHRqUXVlcnkoXCIudmFsaWRhdGUtZm9ybSAjZW1haWxcIikuYWRkQ2xhc3MoJ2lxLXdhcm5pbmcnKTtcblx0XHRcdFx0XHRcdGVycm9yID0gJzEnO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAodXJsID09PSBcIlwiKSB7XG5cdFx0XHRcdFx0XHRqUXVlcnkoXCIudmFsaWRhdGUtZm9ybSAjdXJsXCIpLmFkZENsYXNzKCdpcS13YXJuaW5nJyk7XG5cdFx0XHRcdFx0XHRlcnJvciA9ICcxJztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRqUXVlcnkoXCIudmFsaWRhdGUtZm9ybSAjY29tbWVudFwiKS5yZW1vdmVDbGFzcygnaXEtd2FybmluZycpO1xuXHRcdFx0XHRcdGlmIChjbW50ID09PSBcIlwiKSB7XG5cdFx0XHRcdFx0XHRqUXVlcnkoXCIudmFsaWRhdGUtZm9ybSAjY29tbWVudFwiKS5hZGRDbGFzcygnaXEtd2FybmluZycpO1xuXHRcdFx0XHRcdFx0ZXJyb3IgPSAnMSc7XG5cdFx0XHRcdFx0XHRtZnAgLSBjbG9zZVxuXHRcdFx0XHRcdFx0aWYgKGVycm9yICE9PSAnJyAmJiBlcnJvciA9PT0gJzEnKSB7XG5cdFx0XHRcdFx0XHRcdGpRdWVyeSgnLmVycm9yLW1zZycpLmh0bWwoJ09uZSBvciBtb3JlIGZpZWxkcyBoYXZlIGFuIGVycm9yLiBQbGVhc2UgY2hlY2sgYW5kIHRyeSBhZ2Fpbi4nKTtcblx0XHRcdFx0XHRcdFx0alF1ZXJ5KCcuZXJyb3ItbXNnJykuc2xpZGVEb3duKCk7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHRBZGQgdG8gY2FydCB3aXRoIHBsdXMgbWludXNcblx0XHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cdFx0alF1ZXJ5KGRvY3VtZW50KS5vbignY2xpY2snLCAnYnV0dG9uLnBsdXMsIGJ1dHRvbi5taW51cycsIGZ1bmN0aW9uICgpIHtcblxuXHRcdFx0alF1ZXJ5KCdidXR0b25bbmFtZT1cInVwZGF0ZV9jYXJ0XCJdJykucmVtb3ZlQXR0cignZGlzYWJsZWQnKTtcblxuXHRcdFx0dmFyIHF0eSA9IGpRdWVyeSh0aGlzKS5jbG9zZXN0KCcucXVhbnRpdHknKS5maW5kKCcucXR5Jyk7XG5cblxuXHRcdFx0aWYgKHF0eS52YWwoKSA9PSAnJykge1xuXHRcdFx0XHRxdHkudmFsKDApO1xuXHRcdFx0fVxuXHRcdFx0dmFyIHZhbCA9IHBhcnNlRmxvYXQocXR5LnZhbCgpKTtcblxuXHRcdFx0dmFyIG1heCA9IHBhcnNlRmxvYXQocXR5LmF0dHIoJ21heCcpKTtcblx0XHRcdHZhciBtaW4gPSBwYXJzZUZsb2F0KHF0eS5hdHRyKCdtaW4nKSk7XG5cdFx0XHR2YXIgc3RlcCA9IHBhcnNlRmxvYXQocXR5LmF0dHIoJ3N0ZXAnKSk7XG5cblx0XHRcdC8vIENoYW5nZSB0aGUgdmFsdWUgaWYgcGx1cyBvciBtaW51c1xuXHRcdFx0aWYgKGpRdWVyeSh0aGlzKS5pcygnLnBsdXMnKSkge1xuXHRcdFx0XHRpZiAobWF4ICYmIChtYXggPD0gdmFsKSkge1xuXHRcdFx0XHRcdHF0eS52YWwobWF4KTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRxdHkudmFsKHZhbCArIHN0ZXApO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZiAobWluICYmIChtaW4gPj0gdmFsKSkge1xuXG5cdFx0XHRcdFx0cXR5LnZhbChtaW4pO1xuXHRcdFx0XHR9IGVsc2UgaWYgKHZhbCA+PSAxKSB7XG5cblx0XHRcdFx0XHRxdHkudmFsKHZhbCAtIHN0ZXApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0XHRcdFx0XHRcdFx0U2VsZWN0MiBcblx0XHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblx0XHRpZiAoalF1ZXJ5KCdzZWxlY3QnKS5sZW5ndGggPiAwKSB7XG5cdFx0XHRqUXVlcnkoJ3NlbGVjdCcpLmVhY2goZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRqUXVlcnkodGhpcykuc2VsZWN0Mih7XG5cdFx0XHRcdFx0d2lkdGg6ICcxMDAlJ1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdFx0alF1ZXJ5KCcuc2VsZWN0Mi1jb250YWluZXInKS5hZGRDbGFzcygnd2lkZScpO1xuXHRcdH1cblxuXHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHRxdWlja3ZpZXcgc2VsZWN0MlxuXHRcdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXHRcdGpRdWVyeShkb2N1bWVudC5ib2R5KS5vbignd29vc3FfbG9hZGVkIHdvb3NxX2Nsb3NlJyxmdW5jdGlvbigpe1xuXHRcdFx0alF1ZXJ5KCdzZWxlY3QnKS5lYWNoKGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0alF1ZXJ5KCcjd29vc3EtcG9wdXAgc2VsZWN0Jykuc2VsZWN0Mih7XG5cdFx0XHRcdFx0d2lkdGg6ICcxMDAlJyxcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHRcdGpRdWVyeSgnLnNlbGVjdDItY29udGFpbmVyJykuYWRkQ2xhc3MoJ3dpZGUnKTtcblx0XHR9KTtcblxuXHRcdGpRdWVyeSh3aW5kb3cpLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRsZXQgdGFyZ2V0ID0galF1ZXJ5KGUudGFyZ2V0KTtcblx0XHRcdGlmICghdGFyZ2V0LmNsb3Nlc3QoXCIuc2VhcmNoX2Zvcm1fd3JhcC5pcS1zaG93XCIpLmxlbmd0aCkge1xuXHRcdFx0XHRqUXVlcnkoJy5zZWFyY2hfZm9ybV93cmFwLmlxLXNob3cnKS5yZW1vdmVDbGFzcygnaXEtc2hvdycpO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIXRhcmdldC5jbG9zZXN0KFwiLmhlYWRlci11c2VyLXJpZ2h0cy5pcS1zaG93XCIpLmxlbmd0aCkge1xuXHRcdFx0XHRqUXVlcnkoJy5oZWFkZXItdXNlci1yaWdodHMuaXEtc2hvdycpLnJlbW92ZUNsYXNzKCdpcS1zaG93Jyk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0c2V0VGltZW91dChyZXZTbGlkZXIsIDMwMDApO1xuXHR9KTtcblxuXHRqUXVlcnkoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIERpckxvYWQoKTtcbiAgICAgICAgfSw1MDApO1xuXHRcdGpRdWVyeSh3aW5kb3cpLnJlc2l6ZShyZXZTbGlkZXIpO1xuXHR9KTtcbn0oalF1ZXJ5KSk7XG5cbmZ1bmN0aW9uIGdldERlZmF1bHRNZW51KCkge1xuXHRqUXVlcnkoJy5tZW51LXN0eWxlLW9uZSBuYXYubW9iaWxlLW1lbnUgLnN1Yi1tZW51JykuY3NzKCdkaXNwbGF5JywgJ25vbmUgJyk7XG5cdGpRdWVyeSgnLm1lbnUtc3R5bGUtb25lIG5hdi5tb2JpbGUtbWVudSAudG9wLW1lbnUgbGkgLmRyb3Bkb3duJykuaGlkZSgpO1xuXHRqUXVlcnkoJy5tZW51LXN0eWxlLW9uZSBuYXYubW9iaWxlLW1lbnUgLnN1Yi1tZW51JykucHJldigpLnByZXYoKS5hZGRDbGFzcygnc3VibWVudScpO1xuXHRqUXVlcnkoJy5tZW51LXN0eWxlLW9uZSBuYXYubW9iaWxlLW1lbnUgLnN1Yi1tZW51JykuYmVmb3JlKCc8c3BhbiBjbGFzcz1cInRvZ2dsZWRyb3BcIj48aSBjbGFzcz1cImZhcyBmYS1jaGV2cm9uLXJpZ2h0XCI+PC9pPjwvc3Bhbj4nKTtcblxuXHRqUXVlcnkoJ25hdi5tb2JpbGUtbWVudSAud2lkZ2V0IGksbmF2Lm1vYmlsZS1tZW51IC50b3AtbWVudSBpJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuXHRcdGpRdWVyeSh0aGlzKS5uZXh0KCcuY2hpbGRyZW4sIC5zdWItbWVudScpLnNsaWRlVG9nZ2xlKCk7XG5cdH0pO1xuXHRqUXVlcnkoJy5tZW51LXN0eWxlLW9uZSBuYXYubW9iaWxlLW1lbnUgLnRvcC1tZW51IC5tZW51LWl0ZW0gLnRvZ2dsZWRyb3AnKS5vZmYoJ2NsaWNrJyk7XG5cdGpRdWVyeSgnLm1lbnUtc3R5bGUtb25lIG5hdi5tb2JpbGUtbWVudSAubWVudS1pdGVtIC50b2dnbGVkcm9wJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuXHRcdGlmIChqUXVlcnkodGhpcykuY2xvc2VzdChcIi5tZW51LWlzLS1vcGVuXCIpLmxlbmd0aCA9PSAwKSB7XG5cdFx0XHRqUXVlcnkoJy5tZW51LXN0eWxlLW9uZSBuYXYubW9iaWxlLW1lbnUgLm1lbnUtaXRlbScpLnJlbW92ZUNsYXNzKCdtZW51LWlzLS1vcGVuJyk7XG5cdFx0fVxuXHRcdGlmIChqUXVlcnkodGhpcykucGFyZW50KCkuZmluZChcInVsXCIpLmxlbmd0aCA+IDEpIHtcblx0XHRcdGpRdWVyeSh0aGlzKS5wYXJlbnQoKS5hZGRDbGFzcygnbWVudS1pcy0tb3BlbicpO1xuXHRcdH1cblx0XHRqUXVlcnkoJy5tZW51LXN0eWxlLW9uZSBuYXYubW9iaWxlLW1lbnUgLm1lbnUtaXRlbTpub3QoLm1lbnUtaXMtLW9wZW4pIC5jaGlsZHJlbiwubWVudS1zdHlsZS1vbmUgbmF2Lm1vYmlsZS1tZW51IC5tZW51LWl0ZW06bm90KC5tZW51LWlzLS1vcGVuKSAuc3ViLW1lbnUnKS5zbGlkZVVwKCk7XG5cdFx0aWYgKCFqUXVlcnkodGhpcykubmV4dCgnLmNoaWxkcmVuLCAuc3ViLW1lbnUnKS5pcygnOnZpc2libGUnKSB8fCBqUXVlcnkodGhpcykucGFyZW50KCkuaGFzQ2xhc3MoXCJtZW51LWlzLS1vcGVuXCIpKSB7XG5cdFx0XHRqUXVlcnkodGhpcykubmV4dCgnLmNoaWxkcmVuLCAuc3ViLW1lbnUnKS5zbGlkZVRvZ2dsZSgpO1xuXHRcdH1cblx0XHRqUXVlcnkoJy5tZW51LXN0eWxlLW9uZSBuYXYubW9iaWxlLW1lbnUgLm1lbnUtaXRlbTpub3QoLm1lbnUtaXMtLW9wZW4pIC50b2dnbGVkcm9wJykubm90KGpRdWVyeSh0aGlzKSkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXG5cdFx0alF1ZXJ5KHRoaXMpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcblxuXHRcdGpRdWVyeSgnLm1lbnUtc3R5bGUtb25lIG5hdi5tb2JpbGUtbWVudSAubWVudS1pdGVtJykucmVtb3ZlQ2xhc3MoJ21lbnUtY2xpY2tlZCcpO1xuXHRcdGpRdWVyeSh0aGlzKS5wYXJlbnQoKS5hZGRDbGFzcygnbWVudS1jbGlja2VkJyk7XG5cblx0XHRqUXVlcnkoJy5tZW51LXN0eWxlLW9uZSBuYXYubW9iaWxlLW1lbnUgLm1lbnUtaXRlbScpLnJlbW92ZUNsYXNzKCdjdXJyZW50LW1lbnUtYW5jZXN0b3InKTtcblx0fSk7XG5cblx0alF1ZXJ5KGRvY3VtZW50KS5vbignY2hhbmdlIGlucHV0JywgJ2lucHV0LnF0eScsIGZ1bmN0aW9uICgpIHtcblx0XHRzZXRfcXVhbml0eShqUXVlcnkodGhpcykpO1xuXHR9KTtcblxuXHRqUXVlcnkoZG9jdW1lbnQpLm9uKCdhZGRlZF90b19jYXJ0JywgZnVuY3Rpb24gKGEsIGIsIGMsIGQpIHtcblx0XHRqUXVlcnkoJypbdGl0bGVdJykudG9vbHRpcCgnZGlzYWJsZScpO1xuXHR9KTtcblxuXHQvL2NhcnQgcHJvZHVjdHMgY291bnQgb24gcGx1cyBtaW51c1xuXHRqUXVlcnkoZG9jdW1lbnQpLm9uKCdyZW1vdmVkX2Zyb21fY2FydCBhZGRlZF90b19jYXJ0JywgZnVuY3Rpb24gKGUpIHtcblx0XHRzZXRfcXVhbml0eShqUXVlcnkoJ2lucHV0LnF0eScpKTtcblx0fSk7XG59XG5cbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5SVEwgU3dpdGNoIE1vZGVcbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5mdW5jdGlvbiBEaXJMb2FkKCkge1xuXHRcblx0Y29uc3QgRGlyTW9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaHRtbFwiKVswXS5nZXRBdHRyaWJ1dGUoJ2RpcicpO1xuXHRjb25zdCBMYW5nRWxlbWVudHMgPSBqUXVlcnkoXCIuZWxlbWVudG9yLXNlY3Rpb24tc3RyZXRjaGVkXCIpO1xuXG5cdGNvbnN0IFJUTGdldENzcyA9IChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYm9vdHN0cmFwLWNzcycpKSA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdib290c3RyYXAtY3NzJykgOiBudWxsO1xuXG5cdGNvbnN0IHJfdXJsID0gUlRMZ2V0Q3NzLmdldEF0dHJpYnV0ZSgnaHJlZicpO1xuXHRjb25zdCBwYXRoID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJodG1sXCIpWzBdLmdldEF0dHJpYnV0ZShcImRhdGEtcGF0aFwiKTtcblx0Y29uc3QgdmVyc2lvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaHRtbFwiKVswXS5nZXRBdHRyaWJ1dGUoXCJkYXRhLXZlcnNpb25cIik7XG5cblx0aWYgKERpck1vZGUgPT0gJ3J0bCcpIHtcblx0XHRjb25zdCByYl91cmwgPSBSVExnZXRDc3Muc2V0QXR0cmlidXRlKCdocmVmJywgKHBhdGggKyAndmVuZG9yL2Jvb3RzdHJhcC5ydGwubWluLmNzcycgKyAnP3Zlcj0nICsgdmVyc2lvbikpO1xuXHRcdFJUTGdldENzcy50b1N0cmluZygpLnJlcGxhY2Uocl91cmwsIHJiX3VybCk7XG5cdFx0TGFuZ0VsZW1lbnRzLmVhY2goZnVuY3Rpb24gKGluZGV4LGtleSkge1xuXHRcdFx0TGFuZ0VsZW1lbnRzW2luZGV4XS5zdHlsZS5yaWdodCA9IGpRdWVyeSh0aGlzKS5jc3MoXCJsZWZ0XCIpO1xuXHRcdFx0TGFuZ0VsZW1lbnRzW2luZGV4XS5zdHlsZS5sZWZ0ID0gJ2F1dG8nO1xuXHRcdH0pO1xuXHRcdGpRdWVyeSgnYm9keScpLmFkZENsYXNzKCdydGwnKTtcblx0fVxufVxuXG5mdW5jdGlvbiByZXZTbGlkZXIoKSB7XG5cdGNvbnN0IERpck1vZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImh0bWxcIilbMF0uZ2V0QXR0cmlidXRlKCdkaXInKTtcblxuXHRpZiAoRGlyTW9kZSA9PSAncnRsJykge1xuXHRcdGNvbnN0IHJldlNsaWRlciA9IGpRdWVyeSgnLnJzLXBhcmFsbGF4LXdyYXAnKTtcblx0XHRyZXZTbGlkZXIuZWFjaChmdW5jdGlvbiAoa2V5KSB7XG5cdFx0XHRsZXQgbGVmdCA9IHJldlNsaWRlcltrZXldLnN0eWxlLmxlZnQ7XG5cdFx0XHRyZXZTbGlkZXJba2V5XS5zdHlsZS5yaWdodCA9IHJldlNsaWRlcltrZXldLnN0eWxlLmxlZnQ7XG5cdFx0XHRyZXZTbGlkZXJba2V5XS5zdHlsZS5sZWZ0ID0gbGVmdDtcblx0XHR9KTtcblx0fVxufVxuXG4vLyBXb2NvbWVyY2UgU2V0IFF1YW50aXkgSW5wdXRcbmZ1bmN0aW9uIHNldF9xdWFuaXR5KHRoaXNfKSB7XG5cdGlmICghdGhpc18uaGFzQ2xhc3MoJ3F0eScpKSB7XG5cdFx0dGhpc18gPSB0aGlzXy5zaWJsaW5ncygnaW5wdXQucXR5Jyk7XG5cdH1cblx0bGV0IGN1cnJlbnQgPSB0aGlzXy5hdHRyKCduYW1lJyk7XG5cblx0bGV0IGl0ZW1faGFzaCA9IGN1cnJlbnQgPyBjdXJyZW50LnJlcGxhY2UoL2NhcnRcXFsoW1xcd10rKVxcXVxcW3F0eVxcXS9nLCBcIiQxXCIpIDogZmFsc2U7XG5cdGlmICghaXRlbV9oYXNoKVxuXHRcdHJldHVyblxuXG5cdGxldCBpdGVtX3F1YW50aXR5ID0gdGhpc18udmFsKCk7XG5cdGxldCBjdXJyZW50VmFsID0gcGFyc2VGbG9hdChpdGVtX3F1YW50aXR5KTtcblxuXHRqUXVlcnkuYWpheCh7XG5cdFx0dHlwZTogJ1BPU1QnLFxuXHRcdHVybDogcGhwX3ByZWZpeF9sb2FkbW9yZV9wYXJhbXMuYWpheHVybCxcblx0XHRkYXRhOiB7XG5cdFx0XHRhY3Rpb246ICdxdHlfY2FydCcsXG5cdFx0XHRoYXNoOiBpdGVtX2hhc2gsXG5cdFx0XHRxdWFudGl0eTogY3VycmVudFZhbFxuXHRcdH0sXG5cdFx0c3VjY2VzczogZnVuY3Rpb24gKHJlcykge1xuXHRcdFx0alF1ZXJ5KGRvY3VtZW50LmJvZHkpLnRyaWdnZXIoJ3djX2ZyYWdtZW50X3JlZnJlc2gnKTtcblx0XHRcdGpRdWVyeSgnLmNzc19wcmVmaXgtY2FydC1jb3VudCcpLmh0bWwocmVzWydkYXRhJ11bJ3F1YW50aXR5J10pO1xuXHRcdFx0alF1ZXJ5KCcjbWluaS1jYXJ0LWNvdW50JykuaHRtbChyZXNbJ2RhdGEnXVsncXVhbnRpdHknXSk7XG5cdFx0XHRqUXVlcnkoJyNtaW5pLWNhcnQtY291bnQnKS5lYWNoIChmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYoalF1ZXJ5KHRoaXMpLnRleHQoKS50cmltKCkgPT0gMCkge1xuXHRcdFx0XHRcdGpRdWVyeSgnI21pbmktY2FydC1jb3VudCcpLmNzcygnZGlzcGxheScsJ25vbmUnKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRqUXVlcnkoJyNtaW5pLWNhcnQtY291bnQnKS5jc3MoJ2Rpc3BsYXknLCdibG9jaycpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cdH0pO1xufSJdfQ==